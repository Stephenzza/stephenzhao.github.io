<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>用rand5构造rand7 | Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    

    

    

    

    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1633679241878.css">


    
<link rel="stylesheet" href="/dist/custom.css?v=1633679241878.css">


    <script>
        window.isPost = true
        window.aomori = {
            
            
            
        }
        window.aomori_logo_typed_animated = true
        window.aomori_search_algolia = false

    </script>

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    <!-- <script type="text/javascript" src="https://cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js" opacity= 0.6>
    </script> -->
    <!-- <script src="//itggg.cn/cdn/bangbangt.js"></script> -->
    <!-- <div class="one" style="bottom: 0px; background-image: url(svg/mountains-1.svg);
    z-index: 4;"></div> -->

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-avatar avatar avatar-sm">
                <img src="/images/image.jpg" alt="John Doe">
            </div>
            
            <div class="header-type-inner">
                
                    <div id="typed-strings" style="display:none">
                        <p>Hexo</p>
                    </div>
                    <a class="header-type-title" id="typed" href="/"></a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">Home</a>
                
                <a href="/archives">Archives</a>
                
            </div>
            <div class="header-menu-social">
                
            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">Home</a>
                    
                    <a href="/archives">Archives</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container" style="opacity:1">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-ckwa1j3oe00007kvl9xv3aat5" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          
        
        
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      用rand5构造rand7
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2021-11-17T08:21:59.000Z" itemprop="datePublished">2021-11-17</time>
</div>

            

            

            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <h3 id="较大的随机数构造较小的随机数"><a href="#较大的随机数构造较小的随机数" class="headerlink" title="较大的随机数构造较小的随机数"></a>较大的随机数构造较小的随机数</h3><p>考虑用rand7如何构造rand5, 容易想到使用while循环</p>
<pre><code class="python">x = rand7()
while x &gt; 5:
    x = rand7()
</code></pre>
<p>来判断一下是否符合均匀分布,由于rand7()为均匀分布，即等概率$\frac{1}{7}$生成1~7的整数，假设rand5()得到1时有如下概率：  </p>
<p>$<br>\begin{aligned}<br>p(x=1)&amp;=\frac{1}{7}+\frac{2}{7}·\frac{1}{7}+(\frac{2}{7})^2·\frac{1}{7}+···+(\frac{2}{7})^{n-1}·\frac{1}{7}\&amp;=<br>\frac{1}{7}(1+\frac{2}{7}+(\frac{2}{7})^2+···+(\frac{2}{7})^{n-1})<br>\end{aligned}<br>$</p>
<p>其中$\frac{1}{7}$代表选的数属于1<del>5,$\frac{2}{7}$代表选的数为6</del>7，因此平方代表前两次都没选到，以此类推。化简得：</p>
<p>$S_{\infty}=\frac{a_1}{1-q}(|q|&lt;1)=\frac{\frac{1}{7}}{1-\frac{2}{7}}=\frac{1}{7}·\frac{7}{5}=\frac{1}{5}$</p>
<p>因此符合均匀分布，那么我们只要有任意一个大于想要构造随机数的随机生成器即可</p>
<h3 id="较小的随机数构造较大的随机数"><a href="#较小的随机数构造较大的随机数" class="headerlink" title="较小的随机数构造较大的随机数"></a>较小的随机数构造较大的随机数</h3><p>接下来我们考虑如何把小的随机数生成器生成较大的数，前提是构造的较大数生成器同样符合均匀分布，以rand5为例，如何构造一个生成比5大的随机数并且符合均匀分布呢？首先乘法可以，例如5*rand5,生成(5,10,15,20,25),我们发现这是个离散的，间隔为5，那我们如果再用加法呢？5*rand5+rand5,对于5又加了5个数，10也加了5个数…以此类推，但是我们发现有重复选取，例如5+5和10，这不是均匀分布了，但是如果我们错开一位，让加法得到的数正好比随机选取小，则可以构造成功。因此最后的构造器为5*(rand5-1)+rand5,生成均匀分布1~25</p>
<h3 id="rand5构造rand7"><a href="#rand5构造rand7" class="headerlink" title="rand5构造rand7"></a>rand5构造rand7</h3><pre><code class="python">def rand7():
    x1 = rand5()
    x2 = rand5()
    x = 5*(x1-1)+x2
    while x&gt;7:
        x1 = rand5()
        x2 = rand5()
        x = 5*(x1-1)+x2
    return x
</code></pre>
<p>但如过再leetcode会超时，因为大于7的部分太多。我们考虑用倍数的方式使循环的判读次数平均下来，</p>

        </div>

    </div>

    

    

    

    

    

    
<nav class="article-nav">
  
    <a href="/2021/11/17/page1/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">下一篇</div>
      <div class="article-nav-title">
        
          page1
        
      </div>
    </a>
  
  
    <a href="/2021/11/17/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">上一篇</div>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>


    <section class="share">
        <div class="share-title">分享</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=用rand5构造rand7 - Hexo&url=http://example.com/2021/11/17/%E7%94%A8rand5%E6%9E%84%E9%80%A0rand7/">
            <box-icon type='logo' name='twitter'></box-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=用rand5构造rand7 - Hexo&u=http://example.com/2021/11/17/%E7%94%A8rand5%E6%9E%84%E9%80%A0rand7/">
            <box-icon name='facebook-square' type='logo' ></box-icon>
        </a>
        <!-- <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=用rand5构造rand7 - Hexo&url=http://example.com/2021/11/17/%E7%94%A8rand5%E6%9E%84%E9%80%A0rand7/&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a> -->
    </section>

</article>












</div>
                </section>
            </section>

            
            <aside class="sidebar ">
                


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      

    
      

    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/2021/11/17/page1/">page1</a>
          </li>
        
          <li>
            <a href="/2021/11/17/%E7%94%A8rand5%E6%9E%84%E9%80%A0rand7/">用rand5构造rand7</a>
          </li>
        
          <li>
            <a href="/2021/11/17/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <!-- <link rel="stylesheet" href="/dragon.css"> -->

<link rel="stylesheet" type="text/css" href="wave.css">
<footer class="footer">
    <!-- <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#f0f3f6" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div> -->
    <div id="wavesDIV" style="display: block;">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
          <defs>
              <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
          </defs>
          <g class="parallax">
              <use xlink:href="#gentle-wave" x="48" y="-2" fill="rgba(125,165,191,0.3)"></use>
              <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(125,165,191,0.5)"></use>
              <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(125,165,191,0.7)"></use>
              <use xlink:href="#gentle-wave" x="48" y="12" fill="rgba(125,165,191,1)"></use>
          </g>
      </svg>
  </div>
    <!-- <div style="background:rgba(0, 0, 0, 0)" class="footer-wrap">
        <div class="footer-inner" style="color:#4a5c6d"> 
            Hexo &copy; 2021<br>
            Powered By Hexo · Theme By <a style="color:#4a5c6d" href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a>
            <img src="images/404-page.png">1</img>
        </div>
    </div> -->
    <!-- <script type="text/javascript">
        function fadeOutElement() {
          document.getElementById('pleasantly').style.display = 'none';
        }
      </script>
    <script src="dragon.js"></script>
    <body id="t" class="offline">
        <div class="NotFound_div">
          <div class="Not-Found-game"> -->
            <!-- <h1 class="web" >404 NOT FOUND!</h1>
            <h1 class="mobile">404</h1> -->
            <!-- <span id="pleasantly"></span>
          </div>
        </div>
       -->
        <!-- <div id="main-frame-error" class="interstitial-wrapper">
          <div id="main-content">
            <div class="icon icon-offline" alt=""></div>
          </div>
          <div id="offline-resources" style="display: none;">
            <img id="offline-resources-1x" src="assets/default_100_percent/100-offline-sprite.png">
            <img id="offline-resources-2x" src="assets/default_200_percent/200-offline-sprite.png">
            <template id="audio-resources">
            </template>
          </div>
        </div>
    </body> -->
</footer>






<script src="/dist/build.js?1633679241878.js"></script>


<script src="/dist/custom.js?1633679241878.js"></script>











</body>

</html>